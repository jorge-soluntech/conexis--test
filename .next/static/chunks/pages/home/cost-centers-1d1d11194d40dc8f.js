(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3324],{87080:function(t,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home/cost-centers",function(){return e(97753)}])},97753:function(t,r,e){"use strict";e.r(r),e.d(r,{__N_SSP:function(){return I},default:function(){return S}});var n=e(85893),a=e(26042),o=e(69396),u=e(99534),i=e(44334),c=e(28519),s=e(89235),l=e(14844),f=e(47568),g=e(70655),d=e(51438),_=e(88029),h=e(16567),v=e(27738),m=function(t){(0,_.Z)(e,t);var r=(0,h.Z)(e);function e(){return(0,d.Z)(this,e),r.apply(this,arguments)}var n=e.prototype;return n.toggle=function(t){var r="".concat(this.resourceEndpoint,"/").concat(t,"/").concat(c.t.active_toggle);return this.axiosInstance.put(r).then((function(t){return t.data})).catch((function(r){throw new Error("Failed to get resource with ID ".concat(t,": ").concat(r.message))}))},n.transform=function(t){var r=t.id,e=t.is_active;return{key:r,cost_center:t.cost_center,cost_center_name:t.cost_center_name,status:e}},e}(e(76981).Z),p=new m(v.Z,"/costCenters"),w=function(){var t=(0,f.Z)((function(t,r){var e,n;return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return e=r.arg,[4,p.toggle(e.key)];case 1:return n=t.sent(),[2,p.transform(n.data)]}}))}));return function(r,e){return t.apply(this,arguments)}}(),y=function(){var t=(0,f.Z)((function(t){return(0,g.__generator)(this,(function(t){return[2,p.getAll()]}))}));return function(r){return t.apply(this,arguments)}}(),E={url:c.t.read_all,fetcher:y},k=s.Ip.K,Z=[{text:"Active",value:!0},{text:"Inactive",value:!1}],b=function(){var t=function(){var t=(0,i.Z)(c.t.read_all,w,{rollbackOnError:!0,revalidate:!1}),r=t.trigger,e=(0,u.Z)(t,["trigger"]);return(0,o.Z)((0,a.Z)({},e),{optimisticUpdateStatus:function(t){r({key:t},{onError:function(t){(0,l.nY)("showError","mensaje de error")},populateCache:function(t,r){return null===r||void 0===r?void 0:r.map((function(r){return r.key===t.key?t:r}))}})}})}().optimisticUpdateStatus;return[{title:k.number,dataIndex:"cost_center"},{title:k.name,dataIndex:"cost_center_name",custom:{filter:"uniqueByValue"}},{title:k.status,dataIndex:"status",filters:Z,custom:{sorter:"boolean",filter:"boolean",switch:{callback:t}}}]},C=e(9215),M=e(75047),x={titleTable:"Manage Cost Centers",buttonAddNew:"Add cost center"},I=!0,S=function(){var t=b();return(0,n.jsx)(M.DA,{queryString:E.url,fetcher:E.fetcher,children:function(r){var e=r.data,a=r.error,o=r.mutate,u=r.isValidating,i=r.isLoading;return(0,n.jsx)(C.a,{data:e,error:a,mutate:o,isValidating:u,isLoading:i,columns:t,texts:x,config:{keysToSearchBy:["cost_center","cost_center_name"]}})}})}},44334:function(t,r,e){"use strict";e.d(r,{Z:function(){return u}});var n=e(67294),a=e(95591),o=e(11753);var u=(0,o.xD)(a.ZP,(()=>(t,r,e={})=>{const{mutate:u}=(0,a.kY)(),i=(0,n.useRef)(t),c=(0,n.useRef)(r),s=(0,n.useRef)(0),[l,f,g]=(0,o.Iy)({data:o.i_,error:o.i_,isMutating:!1}),d=l.current,_=(0,n.useCallback)((async(t,r)=>{const[n,a]=(0,o.qC)(i.current);if(!c.current)throw new Error("Can\u2019t trigger the mutation: missing fetcher.");if(!n)throw new Error("Can\u2019t trigger the mutation: missing key.");const l=(0,o.PM)((0,o.PM)({populateCache:!1,throwOnError:!0},e),r),f=(0,o.u3)();s.current=f,g({isMutating:!0});try{const r=await u(n,c.current(a,{arg:t}),(0,o.PM)(l,{throwOnError:!0}));return s.current<=f&&(g({data:r,isMutating:!1,error:void 0}),null==l.onSuccess||l.onSuccess(r,n,l)),r}catch(d){if(s.current<=f&&(g({error:d,isMutating:!1}),null==l.onError||l.onError(d,n,l),l.throwOnError))throw d}}),[]),h=(0,n.useCallback)((()=>{s.current=(0,o.u3)(),g({data:o.i_,error:o.i_,isMutating:!1})}),[]);return(0,o.LI)((()=>{i.current=t,c.current=r})),{trigger:_,reset:h,get data(){return f.data=!0,d.data},get error(){return f.error=!0,d.error},get isMutating(){return f.isMutating=!0,d.isMutating}}}))}},function(t){t.O(0,[4617,7805,1945,1577,1075,5453,3385,2460,7790,1855,8377,5591,2428,3876,5047,1940,9774,2888,179],(function(){return r=87080,t(t.s=r);var r}));var r=t.O();_N_E=r}]);