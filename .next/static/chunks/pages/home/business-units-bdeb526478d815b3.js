(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4345],{61942:function(t,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home/business-units",function(){return n(9416)}])},9416:function(t,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return M},default:function(){return C}});var e=n(85893),i=n(26042),a=n(69396),u=n(99534),o=n(44334),s=n(14844),c=n(89235),l=n(47568),d=n(70655),f=n(51438),g=n(88029),h=n(16567),m=n(76981),b=n(27738),_=function(t){(0,g.Z)(n,t);var r=(0,h.Z)(n);function n(){return(0,f.Z)(this,n),r.apply(this,arguments)}var e=n.prototype;return e.toggle=function(t){var r="".concat(this.resourceEndpoint,"/").concat(t,"/isActive/toggle");return this.axiosInstance.put(r).then((function(t){return t.data})).catch((function(r){throw new Error("Failed to get resource with ID ".concat(t,": ").concat(r.message))}))},e.transform=function(t){var r=t.id,n=t.id_number,e=t.region,i=t.address,a=t.location,u=t.last_name,o=t.is_active,s=t.first_name,c=t.primary_email,l=t.primary_phone,d=t.business_unit_number;return{key:r,region:e,address:i,location:a,idNumber:n,status:o,email:c,lastName:u,buOwner:"".concat(s||""," ").concat(u||""),phone:l,firstName:s,businessUnitNumber:d}},n}(m.Z),p=new _(b.Z,"/businessUnits"),v=function(){var t=(0,l.Z)((function(t,r){var n,e;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return n=r.arg,[4,p.toggle(n.key)];case 1:return e=t.sent(),[2,p.transform(e.data)]}}))}));return function(r,n){return t.apply(this,arguments)}}(),w=function(){var t=(0,l.Z)((function(t){return(0,d.__generator)(this,(function(t){return[2,p.getAll()]}))}));return function(r){return t.apply(this,arguments)}}(),y={url:"/businessUnits/readAll",fetcher:w},E=c.i2.table,k=[{text:"Active",value:!0},{text:"Inactive",value:!1}],N=function(){var t=function(){var t=(0,o.Z)("/businessUnits/readAll",v,{rollbackOnError:!0,revalidate:!1}),r=t.trigger,n=(0,u.Z)(t,["trigger"]);return(0,a.Z)((0,i.Z)({},n),{optimisticUpdateStatus:function(t){r({key:t},{onError:function(t){(0,s.nY)("showError","mensaje de error")},populateCache:function(t,r){return null===r||void 0===r?void 0:r.map((function(r){return r.key===t.key?t:r}))}})}})}().optimisticUpdateStatus;return[{title:E.id,dataIndex:"idNumber"},{title:E.number,dataIndex:"businessUnitNumber",custom:{sorter:"localeCompare"}},{title:E.name,dataIndex:"location"},{title:E.buOwner,dataIndex:"buOwner",custom:{filter:"uniqueByValue"}},{title:E.status,dataIndex:"status",filters:k,custom:{sorter:"boolean",filter:"boolean",switch:{callback:t}}},{title:E.actions,custom:{actionEdit:{url:"/home/business-units/edit"},sorter:!1}}]},Z=n(9215),x=n(75047),M=!0,C=function(){var t=N();return(0,e.jsx)(x.DA,{fetcher:y.fetcher,queryString:y.url,children:function(r){var n=r.data,i=r.error,a=r.mutate,u=r.isValidating,o=r.isLoading;return(0,e.jsx)(Z.a,{config:{keysToSearchBy:["idNumber","location","businessUnitNumber","buOwner"]},columns:t,texts:c.i2,data:n,error:i,mutate:a,isValidating:u,isLoading:o})}})}},44334:function(t,r,n){"use strict";n.d(r,{Z:function(){return u}});var e=n(67294),i=n(95591),a=n(11753);var u=(0,a.xD)(i.ZP,(()=>(t,r,n={})=>{const{mutate:u}=(0,i.kY)(),o=(0,e.useRef)(t),s=(0,e.useRef)(r),c=(0,e.useRef)(0),[l,d,f]=(0,a.Iy)({data:a.i_,error:a.i_,isMutating:!1}),g=l.current,h=(0,e.useCallback)((async(t,r)=>{const[e,i]=(0,a.qC)(o.current);if(!s.current)throw new Error("Can\u2019t trigger the mutation: missing fetcher.");if(!e)throw new Error("Can\u2019t trigger the mutation: missing key.");const l=(0,a.PM)((0,a.PM)({populateCache:!1,throwOnError:!0},n),r),d=(0,a.u3)();c.current=d,f({isMutating:!0});try{const r=await u(e,s.current(i,{arg:t}),(0,a.PM)(l,{throwOnError:!0}));return c.current<=d&&(f({data:r,isMutating:!1,error:void 0}),null==l.onSuccess||l.onSuccess(r,e,l)),r}catch(g){if(c.current<=d&&(f({error:g,isMutating:!1}),null==l.onError||l.onError(g,e,l),l.throwOnError))throw g}}),[]),m=(0,e.useCallback)((()=>{c.current=(0,a.u3)(),f({data:a.i_,error:a.i_,isMutating:!1})}),[]);return(0,a.LI)((()=>{o.current=t,s.current=r})),{trigger:h,reset:m,get data(){return d.data=!0,g.data},get error(){return d.error=!0,g.error},get isMutating(){return d.isMutating=!0,g.isMutating}}}))}},function(t){t.O(0,[4617,7805,1945,1577,1075,5453,3385,2460,7790,1855,8377,5591,2428,3876,5047,1940,9774,2888,179],(function(){return r=61942,t(t.s=r);var r}));var r=t.O();_N_E=r}]);