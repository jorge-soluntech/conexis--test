(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6999],{36622:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home/users/update/[id]",function(){return r(95121)}])},53242:function(e,n,r){"use strict";r.d(n,{W6:function(){return a},lR:function(){return i},ud:function(){return s},x1:function(){return u}});var t=r(85893),o=r(28841),s=function(e){return(0,t.jsx)("span",{children:e})},u=function(e,n){return{id:n,label:e,value:e}},i=function(e){var n=e.label,r=e.closable,s=e.onClose;return(0,t.jsx)(o.Vp,{color:"#E6F1CB",onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:r,onClose:s,style:{marginRight:3},children:n})},a=function(e){var n;return{firstName:e.first_name,lastName:e.last_name,email:e.email,typeUser:null===(n=e.user_roles)||void 0===n?void 0:n[0],buyer:e.legacy_permissioned_buyers?e.legacy_permissioned_buyers:void 0}}},95121:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return E},default:function(){return m}});var t=r(85893),o=r(5152),s=r.n(o),u=r(56209),i=r(75047),a=r(47568),l=r(29815),c=r(70655),d=r(11163),f=r(67294),p=r(90396),v=r(34613),S=r(53242),g=function(){var e=(0,d.useRouter)(),n=(0,f.useState)(e.query.id)[0],r=(0,f.useState)({}),t=r[0],o=r[1],s=(0,f.useState)({}),u=s[0],i=s[1],g=(0,f.useState)([{}]),h=g[0],E=g[1],m=(0,f.useState)([{}]),_=m[0],b=m[1],y=(0,f.useState)(!1),R=y[0],U=y[1],P=(0,f.useState)(!1),w=P[0],B=P[1],L=(0,f.useState)(!1),M=L[0],x=L[1],N=(0,f.useState)(!1),T=N[0],A=N[1],I=(0,f.useState)("This field is required"),Z=I[0],G=I[1],j=(0,f.useState)(!1),k=j[0],C=j[1],D=(0,f.useState)(""),F=D[0],O=D[1],q=new v.c(e);(0,f.useEffect)((function(){A(!0),q.getUser(null===n||void 0===n?void 0:n.toString()).then((function(e){var n;e||(G("There's been an error. Please try again later."),U(!0)),(null===(n=e.user_roles)||void 0===n?void 0:n.length)&&(q.userRolesToUpdate(e.user_roles[0]).then((function(e){o(e)})),O(e.user_roles[0])),i(e),A(!1)})).catch((function(e){G("There's been an error. Please try again later."),U(!0)}))}),[]),(0,f.useEffect)((function(){var e;(null===(e=u.user_roles)||void 0===e?void 0:e.length)&&(q.userRolesToUpdate(u.user_roles[0]).then((function(e){o(e)})),O(u.user_roles[0]))}),[u]);var X=function(){var e=(0,a.Z)((function(e){return(0,c.__generator)(this,(function(n){return O(e),[2]}))}));return function(n){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){if(t){if(t["BUYER USER"]){var e=t["BUYER USER"].map((function(e){return(0,S.x1)(e,e)}));b((function(n){return(0,l.Z)(n).concat([{label:(0,S.ud)("BUYER USER"),options:e}])}))}if(t["MSP USER"]){var n=t["MSP USER"].map((function(e){return(0,S.x1)(e,e)}));b((function(e){return(0,l.Z)(e).concat([{label:(0,S.ud)("MSP USER"),options:n}])}))}if(t["SUPPLIER USER"]){var r=t["SUPPLIER USER"].map((function(e){return(0,S.x1)(e,e)}));b((function(e){return(0,l.Z)(e).concat([{label:(0,S.ud)("SUPPLIER USER"),options:r}])}))}if(t["GLOBAL USER"]){var o=t["GLOBAL USER"].map((function(e){return(0,S.x1)(e,e)}));b((function(e){return(0,l.Z)(e).concat([{label:(0,S.ud)("GLOBAL USER"),options:o}])}))}}}),[t]),(0,f.useEffect)((function(){F&&(["Supplier Administrator","Account Manager","Supplier Finance"].includes(F)?(B(!0),q.getPosibleSelectionsUpdateUsersBuyers(F,void 0,u.supplier,null===n||void 0===n?void 0:n.toString()).then((function(e){var n=[];e.data.posibleBuyers.forEach((function(e){n.push({label:e.client_company_name,value:e.id})})),E(n),B(!0)})).catch((function(){G("There's been an error. Please try again later."),U(!0)}))):["MSP Administrator","Program Manager","Program Representative","MSP Finance","Super Administrator","Product Support"].includes(F)?(B(!0),q.getPosibleSelectionsUpdateUsersBuyers(F,void 0,void 0,null===n||void 0===n?void 0:n.toString()).then((function(e){var n=[];e.data.posibleBuyers.forEach((function(e){n.push({label:e.client_company_name,value:e.id})})),E(n)})).catch((function(){G("There's been an error. Please try again later."),U(!0)}))):["Buyer Administrator","Approver","Hiring Manager","Buyer Finance","Delegate"].includes(F)&&B(!1))}),[F]);var Y=function(){var e=(0,a.Z)((function(e){var r,t,o,s,u,i;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return r=e.typeUser,t=e.buyer,o=e.firstName,s=e.lastName,u=e.email,i={first_name:o,last_name:s,user_roles:[r],email:u},t&&(i.legacy_permissioned_buyers=t.toString().split(",")),x(!0),[4,q.userUpdate(null===n||void 0===n?void 0:n.toString(),i).then((function(){C(!0)})).catch((function(e){var n,r,t,o,s,u,i,a,l;400===e.request.status?(null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)&&"string"===typeof(null===(t=e.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)&&(null===(s=e.response)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.message.includes("already being used"))?(G("Email address is already being used by another user."),U(!0)):(G(null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(l=a.message)||void 0===l?void 0:l.toString()),U(!0)):(G("There's been an error. Please try again later."),U(!0))})).finally((function(){return x(!1)}))];case 1:return a.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){p.XI.Qg.includes(F)&&B(!1)}),[F]),{userInfo:u,userRole:F,possibleBuyers:h,roles:_,showError:R,showBuyer:w,isLoading:M,messageError:Z,successResult:k,loadingFormData:T,onSubmit:Y,onSelectRole:X,setShowError:U,setMessageError:G}},h=s()((function(){return r.e(4211).then(r.bind(r,84211))}),{loadableGenerated:{webpack:function(){return[84211]}},loading:function(){return(0,t.jsx)(u.Z,{})}}),E=!0,m=function(){return(0,t.jsx)(i.pG,{useGetData:g,children:function(e){var n=e.userInfo,r=e.userRole,o=e.possibleBuyers,s=e.roles,u=e.showError,i=e.showBuyer,a=e.isLoading,l=e.messageError,c=e.successResult,d=e.onSubmit,f=e.onSelectRole,p=e.setShowError,v=e.setMessageError;return(0,t.jsx)(h,{userInfo:n,userRole:r,possibleBuyers:o,roles:s,showError:u,showBuyer:i,isLoading:a,messageError:l,successResult:c,onSubmit:d,onSelectRole:f,setShowError:p,setMessageError:v})}})}}},function(e){e.O(0,[7805,1945,1577,1075,5453,3385,2460,7790,1855,8377,5591,5047,4613,9774,2888,179],(function(){return n=36622,e(e.s=n);var n}));var n=e.O();_N_E=n}]);